import { Box } from "@mui/material";
import { GetServerSideProps } from "next";
import Head from "next/head";
import { Hero, Sidebar, Content } from "src/components";
import { BlogsType } from "src/interface/blogs.interface";
import Layout from "src/layout/layout";
import { BlogsService } from "src/service/blog.service";

const IndexPage = ({blogs}: HomePageProps) => {
    //endi next jsni asosiy sahifasi hissoblangan indexPageda props bilan kelgan  qiymatlarida serverdan keladigan datalarni typlelari bor HomePageProps nomli interface bor
    // console.log(props.message);//bu propsdan kelgan message qiymati

    console.log(blogs);

    // //reactda qilinganda shunday qilinardi yani reactdagi csr holatinishu kodlar bilan qilib serverdan datalarni olib ko'rdik
    // const [blogs, setBlogs] = useState(null)//null bu holatda loader yani react serverdan keladigan datalar kelguncha kutish joyi
    // useEffect(() => {
    //     BlogsService.getAllBlogs().then((data) => setBlogs(data));
    // }, []);
    // console.log(blogs);//onmountda kirish//birinchi usestatedagi null chiqadi chunki csr (client side rendring) ikkinchi esa bloglar chunki reactni default serveri yani csr (yani bo'sh html) shunda react spa (single page application) ishladi yani clientni browseri serverdan keladigan datani emas birinchi loaderni ko'rdi shu sabab spa csr default holatda seo uchun bo'maydi
    // //reactda qilinganda shunday qilinardi

    return (
        // bu layout.tsx da yozilgan component bu componentni vazifasi buni ichidagi chaqiriladigan componentlar roturga aftamatik tarzda olinadi yani rooter ishlatish shartmas reactda roter domni nextni o'zi bajaradi. aslida bu Layout component nextda yozilgan funksiya ichida rooter va yana useeffect yana qanadur funksiyalar aslida default holatda layout ichida yozilgan
        <Layout>
            <Head>
                {/* bu Head tegi next jsni seo uchun chiqarilgan tegi bu title esa asosiy sahifani title bu Head ichiga discription va meta teglarni seoga aloqador hamma teglarni yozib saytni asosiy sahifasini seosini qilish mumkun bu holatda "Next.jsda SEO qilish" asosiy sahifani titeli yani asosiy kalit so'zi  */}
                {/* Layoutdagi title */}
                <html lang="uz"/>
                <title>Next.jsda SEO qilish</title>
                {/* bu index pages papkani ichida pagesni ichida index papka bo'lsa next.js buni aftamatik tarzda asosiy sahifa qiladi huddi reactdagi app.js failday yani bu asosiy papka hamma marshutlash shu papkadan boshlanadi */}
                <meta
                    name="description"
                    // shu joyda qanday teglar qo'yish mumkunligini yahshilab o'rgan
                    content="SEO uchun juda kerakli joy IndexPage sahifasi"
                />
            </Head>

            <Hero />

            <Box
                sx={{
                    display: "flex",
                    gap: "20px",
                    flexDirection: { xs: "column", md: "row" },
                    padding: "20px",
                }}
            >
                <Sidebar />
                <Content />
            </Box>
        </Layout>
    );
};

export default IndexPage;

////getServerSideProps bu next jsni server side funksiyasini nomi nextda serverdan yani ssr serverdan foydalanganda shu nom bilanfunksiya yozish shart shunda next biladi bu server bilan ishlash funksiyasi ekanligini getServerSideProps kalit so'z hissobida  va bu funksiya pagesni ichidagi index.tsda yozilishi shart shunda next bu funksiyani taniydi agar boshqa papkada yozilsa next buni tanimasligi mumkun bu nextni 12 chi versiyasida expoerham global bo'lishi shart
export const getServerSideProps: GetServerSideProps<
    HomePageProps
> = async () => {
    //GetServerSideProps NEXTNI KALIT SO'ZI TS UCHUN Bu GetServerSideProps ishlatilganda funksiya return qilmasa hato chiqadi yani server bilan malumot oldi berdida hato bor deb hatoni aniq aytadi shu uchun bu next jsda ts uchun kalit so'z hissoblanadi // generic ichidagi HomePageProps esa SERVERDAN GET qilinib olib kelingan datalarni taype nima ekanligini aniq aytish uchun boshqa datalarni qabul qilmaslik uchun yani bu holatda generik yani ona type qilib HomePageProps interface berildi endi bu getserversideprops funksiyasi get qilganda get qilgan narsalari ichida HomePagePropsda type aniq berilmagan narsalar bo'lsa hato chiqaradi endibu funksiya ts bo'yicha typelar masalasida HomePageProps interfacega qaram

    const blogs  = await BlogsService.getAllBlogs()//hygrapg serverdan blogs olindi 

    return {
        props: {
            blogs 
        },
    };
};

interface HomePageProps {
  blogs: BlogsType[];
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//// next.js radnoy page
// import type { NextPage } from 'next'
// import Head from 'next/head'
// import Image from 'next/image'
// import styles from '../styles/Home.module.css'

// const Home: NextPage = () => {
//   return (
//     <div className={styles.container}>
//       <Head>
//         <title>Create Next App</title>
//         <meta name="description" content="Generated by create next app" />
//         <link rel="icon" href="/favicon.ico" />
//       </Head>

//       <main className={styles.main}>
//         <h1 className={styles.title}>
//           Welcome to <a href="https://nextjs.org">Next.js!</a>
//         </h1>

//         <p className={styles.description}>
//           Get started by editing{' '}
//           <code className={styles.code}>pages/index.tsx</code>
//         </p>

//         <div className={styles.grid}>
//           <a href="https://nextjs.org/docs" className={styles.card}>
//             <h2>Documentation &rarr;</h2>
//             <p>Find in-depth information about Next.js features and API.</p>
//           </a>

//           <a href="https://nextjs.org/learn" className={styles.card}>
//             <h2>Learn &rarr;</h2>
//             <p>Learn about Next.js in an interactive course with quizzes!</p>
//           </a>

//           <a
//             href="https://github.com/vercel/next.js/tree/canary/examples"
//             className={styles.card}
//           >
//             <h2>Examples &rarr;</h2>
//             <p>Discover and deploy boilerplate example Next.js projects.</p>
//           </a>

//           <a
//             href="https://vercel.com/new?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app"
//             className={styles.card}
//           >
//             <h2>Deploy &rarr;</h2>
//             <p>
//               Instantly deploy your Next.js site to a public URL with Vercel.
//             </p>
//           </a>
//         </div>
//       </main>

//       <footer className={styles.footer}>
//         <a
//           href="https://vercel.com?utm_source=create-next-app&utm_medium=default-template&utm_campaign=create-next-app"
//           target="_blank"
//           rel="noopener noreferrer"
//         >
//           Powered by{' '}
//           <span className={styles.logo}>
//             <Image src="/vercel.svg" alt="Vercel Logo" width={72} height={16} />
//           </span>
//         </a>
//       </footer>
//     </div>
//   )
// }

// export default Home
